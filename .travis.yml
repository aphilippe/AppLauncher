sudo: false
language: cpp
os:
- osx
- linux
compiler:
- gcc
install:
- if [ "$CXX" = "g++" ]; then export CXX="g++-4.9" CC="gcc-4.9"; fi
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.9
    - g++-4.9
before_script:
- $CXX --version
- mkdir build
- cd build
- cmake ..
script: make

before_deploy:
  - export FILE_TO_UPLOAD=$(ls bin/Applauncher_*)

deploy:
  provider: releases
  api_key:
    secure: HqC0YvGOL0sOr8SWZgHVZZ5XYDF4+xUCcCmEToYat5AO6uDPUvhUx5cfa8R21/Z5e9GAcgc9T4ldq5STYTNTLh1ntnNYN/0a50c9CABlLMS6T+uCbpmPmwvb4A28Gly8rQtXNSLkAmkZLOzYZSNKy4L7aavemk7Nr0AZEMcbnwnFgLCkb4nQ8pWx8C0qM64InvMyvIx5dHasNkRsigvHgcYms+zWkU3OYBoJOo3fiu72GD5grAMgq5GLiWS/F4pvBykmXAsxIqV8nkz2YO+XHUHQ4SdcRgmolYHI8O1Ezh0AeomAltWKfZLHTUEkmDezUviWI5TzwwQmjXaZuf3Z2OYjlTlYTcuUxHHxxNKx1BF2mp5D4TbdvxgjhkGxDQk/K+HM+EoNafEj7hZcParG81UaRGnXTj3uCkyWmm1WvkYMMXmmpdfDuYYMVEcW6g/vlo712w74D1vc1Ej5R57TYZrNK0dSfxqgm9UV+0KsBQIJHiLLt+rnSutoeUOJKyYlNCi01wwwWgF9wmq6rFUF3RkdqeLbrFP9uxp4iFAjs3uzqoClonAv/ukZ1VnPJlufThOhCvBJFx5kQrqiHfipfWNfzRmWzU84QYvyhKiuWcsc047+VAO9SEv7LR/SpA2Rz8l9MNyYRhxKxhedrmxWEJnuHn9aJ3UtSBzgMDFK+Jw=
  file: "${FILE_TO_UPLOAD}"
  skip_cleanup: true
  on:
    tags: true
